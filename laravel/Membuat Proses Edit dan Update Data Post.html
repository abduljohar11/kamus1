<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membuat Proses Edit dan Update Data Post</title>
    <style>
        body { font-family: 'Segoe UI', system-ui, sans-serif; line-height: 1.8; color: #334155; background: #f8fafc; margin: 0; padding: 40px 20px; }
        .container { max-width: 850px; margin: 0 auto; }
        .btn-back { display: inline-block; margin-bottom: 20px; color: #3b82f6; text-decoration: none; font-weight: bold; font-size: 0.9rem; }
        .materi-card { background: #fff; padding: 45px; border-radius: 16px; border: 1px solid #e2e8f0; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        h1 { font-size: 2.5rem; color: #0f172a; margin-top: 0; border-bottom: 4px solid #3b82f6; padding-bottom: 10px; }
        h3 { margin-top: 35px; color: #1e293b; font-size: 1.5rem; border-left: 5px solid #3b82f6; padding-left: 15px; }
        pre { background: #1e1e2e; color: #f8f8f2; padding: 20px; border-radius: 12px; overflow-x: auto; margin: 25px 0; }
        code { font-family: 'Consolas', monospace; background: #fee2e2; color: #991b1b; padding: 2px 6px; border-radius: 4px; font-size: 0.9em; }
        pre code { background: none; color: inherit; padding: 0; }
        img { max-width: 100%; border-radius: 12px; margin: 30px 0; display: block; border: 1px solid #e2e8f0; }
        blockquote { border-left: 5px solid #3b82f6; background: #eff6ff; padding: 15px 25px; border-radius: 0 10px 10px 0; font-style: italic; margin: 25px 0; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="btn-back">← Kembali ke Daftar Isi</a>
        <article class="materi-card">
            <main class="flex-1 min-w-0 lg:ml-80 mr-0 xl:mr-64 transition-all duration-300 pt-10 md:pt-0">
<div class="max-w-full mx-auto px-4 sm:px-6 md:px-8 py-5">
<h1 class="text-3xl font-bold text-neutral-900 dark:text-neutral-100 mb-3">Membuat Proses Edit dan Update Data Post</h1>
<div class="prose lg:prose-lg prose-a:text-blue-500 dark:prose-a:text-blue-400 dark:prose-invert w-full max-w-full">
<div x-data="" x-init="let t=document.querySelector('.table-of-contents'),d=document.querySelector('.toc'),m=document.querySelector('.toc-mobile'),b=document.querySelector('.btn-toc');if(t&amp;&amp;t.querySelectorAll('li').length&gt;0){d.appendChild(t.cloneNode(true));m.appendChild(t.cloneNode(true))}else b?.classList.add('hidden');$nextTick(()=&gt;{document.querySelectorAll(`.prose a[href^='http']`).forEach(a=&gt;{a.href.includes(location.hostname)||(a.target='_blank',a.rel='noopener noreferrer')})})">
</div>
<ul class="table-of-contents">
<li><a href="#content-langkah-1---menambahkan-method-edit-dan-update">Langkah 1 - Menambahkan Method Edit dan Update</a></li>
<li><a href="#content-langkah-2---membuat-halaman-view--form-edit">Langkah 2 - Membuat Halaman View / Form Edit</a></li>
<li><a href="#content-langkah-3---uji-coba-proses-edit-dan-update-data">Langkah 3 - Uji Coba Proses Edit dan Update Data</a></li>
</ul>
<p>Pada materi sebelumnya kita telah belajar bagaimana cara membuat proses <em>insert</em> data ke dalam <em>database</em> dan menampilkan <em>detail</em> data. sekarang kita akan belajar bagaimana cara melakukan proses <em>edit</em> dan <em>update</em> data ke dalam <em>database</em>.</p>
<h3><a aria-hidden="true" class="heading-permalink" href="#content-langkah-1---menambahkan-method-edit-dan-update" id="content-langkah-1---menambahkan-method-edit-dan-update" title="Permalink"></a>Langkah 1 - Menambahkan Method <code>Edit</code> dan <code>Update</code></h3>
<p>Untuk proses <em>edit</em> dan <em>update</em> data, kita akan menambahkan 2 <em>method</em> baru di dalam <em>controller</em> <em>post</em>, yaitu <code>edit</code> dan <code>update</code>. Untuk <em>method</em> <code>edit</code> akan kita gunakan untuk menampilkan halaman <em>edit</em> dan untuk <em>method</em> <code>update</code> akan digunakan untuk memproses data yang sudah di <em>edit</em>.</p>
<p>Silahkan buka <em>file</em> <code>app/Http/Controllers/PostController.php</code>, kemudian ubah semua kode-nya menjadi seperti berikut ini :</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use App\Models\Post;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Storage;

class PostController extends Controller
{
    /**
     * index
     *
     * @return void
     */
    public function index()
    {
        //get posts
        $posts = Post::latest()-&gt;paginate(5);

        //render view with posts
        return view('posts.index', compact('posts'));
    }

        /**
     * create
     *
     * @return void
     */
    public function create()
    {
        return view('posts.create');
    }

    /**
     * store
     *
     * @param Request $request
     * @return void
     */
    public function store(Request $request)
    {
        //validate form
        $this-&gt;validate($request, [
            'image'     =&gt; 'required|image|mimes:jpeg,png,jpg,gif,svg|max:2048',
            'title'     =&gt; 'required|min:5',
            'content'   =&gt; 'required|min:10'
        ]);

        //upload image
        $image = $request-&gt;file('image');
        $image-&gt;storeAs('public/posts', $image-&gt;hashName());

        //create post
        Post::create([
            'image'     =&gt; $image-&gt;hashName(),
            'title'     =&gt; $request-&gt;title,
            'content'   =&gt; $request-&gt;content
        ]);

        //redirect to index
        return redirect()-&gt;route('posts.index')-&gt;with(['success' =&gt; 'Data Berhasil Disimpan!']);
    }
    
    /**
     * show
     *
     * @param  mixed $id
     * @return void
     */
    public function show($id)
    {
        //get post by ID
        $post = Post::find($id);

        //return view
        return view('posts.show', compact('post'));
    }

    /**
     * edit
     *
     * @param  mixed $post
     * @return void
     */
    public function edit(Post $post)
    {
        return view('posts.edit', compact('post'));
    }
    
    /**
     * update
     *
     * @param  mixed $request
     * @param  mixed $post
     * @return void
     */
    public function update(Request $request, Post $post)
    {
        //validate form
        $this-&gt;validate($request, [
            'image'     =&gt; 'image|mimes:jpeg,png,jpg,gif,svg|max:2048',
            'title'     =&gt; 'required|min:5',
            'content'   =&gt; 'required|min:10'
        ]);

        //check if image is uploaded
        if ($request-&gt;hasFile('image')) {

            //upload new image
            $image = $request-&gt;file('image');
            $image-&gt;storeAs('public/posts', $image-&gt;hashName());

            //delete old image
            Storage::delete('public/posts/'.$post-&gt;image);

            //update post with new image
            $post-&gt;update([
                'image'     =&gt; $image-&gt;hashName(),
                'title'     =&gt; $request-&gt;title,
                'content'   =&gt; $request-&gt;content
            ]);

        } else {

            //update post without image
            $post-&gt;update([
                'title'     =&gt; $request-&gt;title,
                'content'   =&gt; $request-&gt;content
            ]);
        }

        //redirect to index
        return redirect()-&gt;route('posts.index')-&gt;with(['success' =&gt; 'Data Berhasil Diubah!']);
    }
}
</code></pre>
<p>Dari perubahan kode di atas, pertama kita <em>import</em> <em>Facades</em> <code>Storage</code> dari <strong>Laravel</strong>. Ini akan kita manfaatkan untuk proses mebghapus gambar dari <em>server</em>.</p>
<pre><code>use Illuminate\Support\Facades\Storage;
</code></pre>
<p>Selanjutnya kita menambahkan 2 <em>method</em> baru, yaitu :</p>
<ul>
<li><code>function edit</code></li>
<li><code>function update</code></li>
</ul>
<p><em><strong>Function Edit</strong></em></p>
<p><em>Method</em> digunakan untuk menampilkan data yang akan di edit ke dalam sebuah <em>form</em>, jika teman-teman perhatikan di dalam <em>method</em> ini kita memiliki sebuah <em>parameter</em>, yaitu <code>Post $post</code>, yang artinya <em>parameter</em> tersebut adalah <em>model</em> <code>Post</code> yang diambil datanya sesuai dengan ID yang di dapatkan dari <em>URL</em>, teknik ini biasa disebut dengan <strong>Model Injection</strong> atau <strong>Dependency Injection</strong>.</p>
<p>Setelah data tersebut di dapatkan, maka akan di parsing ke dalam <em>view</em> <code>edit.blade.php</code> di dalam <em>folder</em> <code>posts</code> dengan menggunakan <em>helper</em> <code>compact</code>.</p>
<pre><code>return view('posts.edit', compact('post'));
</code></pre>
<p><em><strong>Function Update</strong></em></p>
<p><em>Method</em> ini akan digunakan untuk memproses data yang akan di<em>update</em>. Di dalam <em>method</em> ini, pertama kita lakukan validasi terlebih dahulu, sama seperti yang ada di dalam <em>method</em> <code>store</code>.</p>
<pre><code>//validate form
$this-&gt;validate($request, [
    'image'     =&gt; 'image|mimes:jpeg,png,jpg,gif,svg|max:2048',
    'title'     =&gt; 'required|min:5',
    'content'   =&gt; 'required|min:10'
]);
</code></pre>
<p>Jika data yang dikirim sudah sesuai, maka kita akan melakukan pengecekan apakah ada sebuah <em>request</em> dengan jenis <em>file</em>.</p>
<pre><code>//check if image is uploaded
if ($request-&gt;hasFile('image')) {
	
	//...

} else {
	
	//...

}
</code></pre>
<p>Jika IYA, maka kita akan melakukan <em>upload</em> gambar baru.</p>
<pre><code>//upload new image
$image = $request-&gt;file('image');
$image-&gt;storeAs('public/posts', $image-&gt;hashName());
</code></pre>
<p>Setelah gambar baru berhasil di<em>upload</em>, langkah selanjutnya yaitu menghapus gambar yang lama.</p>
<pre><code>//delete old image
Storage::delete('public/posts/'.$post-&gt;image);
</code></pre>
<p>Kemudian, kita lakukan <em>update</em> data ke dalam <em>database</em> dengan gambar terbaru.</p>
<pre><code>//update post with new image
$post-&gt;update([
   'image'     =&gt; $image-&gt;hashName(),
   'title'     =&gt; $request-&gt;title,
   'content'   =&gt; $request-&gt;content
]);
</code></pre>
<p>Jika tidak ada <em>request</em> dengan jenis <em>file</em>, maka kita cukup <em>update</em> <em>field</em> <code>title</code> dan <code>content</code> saja.</p>
<pre><code>//update post without image
$post-&gt;update([
   'title'     =&gt; $request-&gt;title,
   'content'   =&gt; $request-&gt;content
]);
</code></pre>
<p>Dan kita <em>redirect</em> ke dalam <em>route</em> yang bernama <code>posts.index</code> dengan memberikan informasi data berhasil di<em>update</em>.</p>
<pre><code>//redirect to index
return redirect()-&gt;route('posts.index')-&gt;with(['success' =&gt; 'Data Berhasil Diubah!']);
</code></pre>
<h3><a aria-hidden="true" class="heading-permalink" href="#content-langkah-2---membuat-halaman-view--form-edit" id="content-langkah-2---membuat-halaman-view--form-edit" title="Permalink"></a>Langkah 2 - Membuat Halaman View / Form Edit</h3>
<p>Setelah berhasil menambahkan 2 <em>method</em>, sekarang kita lanjutkan untuk menambahkan <em>file</em> <em>view</em> untuk proses <em>edit</em> data. Silahkan buat <em>file</em> baru dengan nama <code>edit.blade.php</code> di dalam <em>folder</em> <code>resources/views/posts/</code>, kemudian masukkan kode berikut ini di dalamnya.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;title&gt;Edit Data Post - SantriKoding.com&lt;/title&gt;
    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"&gt;
&lt;/head&gt;
&lt;body style="background: lightgray"&gt;

    &lt;div class="container mt-5 mb-5"&gt;
        &lt;div class="row"&gt;
            &lt;div class="col-md-12"&gt;
                &lt;div class="card border-0 shadow rounded"&gt;
                    &lt;div class="card-body"&gt;
                        &lt;form action="{{ route('posts.update', $post-&gt;id) }}" method="POST" enctype="multipart/form-data"&gt;
                            @csrf
                            @method('PUT')

                            &lt;div class="form-group"&gt;
                                &lt;label class="font-weight-bold"&gt;GAMBAR&lt;/label&gt;
                                &lt;input type="file" class="form-control" name="image"&gt;
                            &lt;/div&gt;

                            &lt;div class="form-group"&gt;
                                &lt;label class="font-weight-bold"&gt;JUDUL&lt;/label&gt;
                                &lt;input type="text" class="form-control @error('title') is-invalid @enderror" name="title" value="{{ old('title', $post-&gt;title) }}" placeholder="Masukkan Judul Post"&gt;
                            
                                &lt;!-- error message untuk title --&gt;
                                @error('title')
                                    &lt;div class="alert alert-danger mt-2"&gt;
                                        {{ $message }}
                                    &lt;/div&gt;
                                @enderror
                            &lt;/div&gt;

                            &lt;div class="form-group"&gt;
                                &lt;label class="font-weight-bold"&gt;KONTEN&lt;/label&gt;
                                &lt;textarea class="form-control @error('content') is-invalid @enderror" name="content" rows="5" placeholder="Masukkan Konten Post"&gt;{{ old('content', $post-&gt;content) }}&lt;/textarea&gt;
                            
                                &lt;!-- error message untuk content --&gt;
                                @error('content')
                                    &lt;div class="alert alert-danger mt-2"&gt;
                                        {{ $message }}
                                    &lt;/div&gt;
                                @enderror
                            &lt;/div&gt;

                            &lt;button type="submit" class="btn btn-md btn-primary"&gt;UPDATE&lt;/button&gt;
                            &lt;button type="reset" class="btn btn-md btn-warning"&gt;RESET&lt;/button&gt;

                        &lt;/form&gt; 
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"&gt;&lt;/script&gt;
&lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.ckeditor.com/4.13.1/standard/ckeditor.js"&gt;&lt;/script&gt;
&lt;script&gt;
    CKEDITOR.replace( 'content' );
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Dari penambahan kode di atas, jika kita perhatikan pada bagian <em>form</em> <em>action</em>, kita arahkan ke dalam <em>route</em> yang bernama <code>posts.update</code> dengan menambahkan <em>parameter</em> <code>ID</code> <em>posts</em>.</p>
<pre><code>&lt;form action="{{ route('posts.update', $post-&gt;id) }}" method="POST" enctype="multipart/form-data"&gt;
</code></pre>
<p>Dan untuk <em>update</em> data, pastikan di dalam <em>form</em> ditambahkan kode berikut ini :</p>
<pre><code>@method('PUT')
</code></pre>
<p>Kode di atas, digunakan untuk menandakan bahwa <em>form</em> ini menggunakan <em>method</em> <code>PUT</code>, karena <em>method</em> tersebut difungsikan untuk proses <em>update</em> data.</p>
<h3><a aria-hidden="true" class="heading-permalink" href="#content-langkah-3---uji-coba-proses-edit-dan-update-data" id="content-langkah-3---uji-coba-proses-edit-dan-update-data" title="Permalink"></a>Langkah 3 - Uji Coba Proses Edit dan Update Data</h3>
<p>Sekarang, silahkan klik <em>button</em> <code>EDIT</code> di data yang teman-teman punya dan jika berhasil, maka akan menampilkan halaman <em>edit</em> data <em>post</em>. Kurang lebih seperti berikut ini :</p>
<p><img alt="" src="https://raw.githubusercontent.com/maulayyacyber/assets-images-ebooks/main/laravel-untuk-pemula/post-edit.png"/></p>
<p>Silahkan sesuaikan data yang ingin di<em>update</em>, kemudian klik <em>button</em> <code>UPDATE</code>. Dan jika berhasil, maka kita akan diarahkan ke dalam <em>route</em> <code>posts.index</code> dengan data yang berhasil diperbarui.</p>
<p><img alt="" src="https://raw.githubusercontent.com/maulayyacyber/assets-images-ebooks/main/laravel-untuk-pemula/post-update.png"/></p>
</div>
<!-- Div pembatas dengan content -->
<div class="border-t border-neutral-200 dark:border-neutral-700 mt-8 pt-6">
<div class="flex justify-end">
<a :aria-busy="loading ? 'true' : 'false'" :class="loading ? 'opacity-60 pointer-events-none' : ''" class="inline-flex items-center gap-2 px-6 py-3 bg-red-700 hover:bg-red-800 dark:bg-neutral-600 dark:hover:bg-neutral-700 text-white text-sm font-medium rounded-full transition-colors duration-200" data-id="1583" href="https://santrikoding.com/account/my-courses/laravel-untuk-pemula/1584?version=1.1.0" x-data="lessonComplete(28, '1.1.0', 'https://santrikoding.com/account/my-courses/laravel-untuk-pemula/lesson/completed')" x-on:click.prevent="complete($event)">
 <span x-text="loading ? 'Processing…' : 'Complete &amp; Continue'"></span>
 </a>
</div>
</div>
</div>
</main><aside :class="tocVisible ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'" class="hidden xl:block fixed right-0 top-14 bottom-0 w-64 overflow-y-auto border-l border-neutral-200 dark:border-neutral-700/80 bg-white/95 dark:bg-neutral-900 backdrop-blur-sm transition-all duration-300 z-30" x-cloak="">
<!-- Header dengan glass effect -->
<div class="sticky top-0 z-10 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-sm border-b border-neutral-200/50 dark:border-neutral-700/50 px-4 py-4">
<div class="flex items-center justify-between">
<div class="flex items-center gap-2">
<div class="p-1.5 bg-primary/10 rounded-lg">

</div>
<div>
<h3 class="text-sm font-semibold text-neutral-900 dark:text-neutral-100">On This Page</h3>
</div>
</div>

</div>
</div>
<!-- Progress Indicator yang benar-benar visible -->
<div class="px-4 py-3 border-b border-neutral-200/50 dark:border-neutral-700/50" x-data="{
            scrollProgress: 0,
            updateProgress() {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                this.scrollProgress = docHeight &gt; 0 ? Math.min((scrollTop / docHeight) * 100, 100) : 0;
            }
         }" x-init="updateProgress(); $watch('scrollProgress', () =&gt; {}); window.addEventListener('scroll', () =&gt; updateProgress())">
<div class="flex items-center justify-between text-xs mb-2">
<span class="text-neutral-600 dark:text-neutral-400">Reading Progress</span>
<span class="text-primary font-medium" x-text="Math.round(scrollProgress) + '%'"></span>
</div>
<!-- Progress Bar dengan warna yang kontras -->
<div class="w-full bg-neutral-300 dark:bg-neutral-600 rounded-full h-2 shadow-inner">
<div :style="'width: ' + scrollProgress + '%'" class="bg-gradient-to-r from-emerald-300 to-emerald-600 h-2 rounded-full transition-all duration-300 shadow-sm"></div>
</div>
</div>
<!-- Table of Contents Content -->

<!-- Footer dengan quick actions -->
<div class="sticky bottom-0 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-sm border-t border-neutral-200/50 dark:border-neutral-700/50 p-3">
<div class="flex items-center justify-between text-xs">


</div>
</div>
</aside>
        </article>
    </div>
</body>
</html>